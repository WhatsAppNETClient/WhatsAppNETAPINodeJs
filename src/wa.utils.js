require("dotenv").config();const{CHROME_PATH:CHROME_PATH,SESSION_ID:SESSION_ID}=process.env,path=require("path"),fs=require("fs"),{Client:Client,MessageMedia:MessageMedia}=require("whatsapp-web.js"),SESSION_FILE_PATH=path.join(path.resolve("./session"),`${SESSION_ID}.json`);let sessionCfg;fs.existsSync(SESSION_FILE_PATH)&&(sessionCfg=require(SESSION_FILE_PATH));const client=new Client({puppeteer:{headless:!0,executablePath:CHROME_PATH},session:sessionCfg}),sendTextAsync=async(e,s,n)=>{try{return await n.isRegisteredUser(e)?(await n.sendMessage(e,s),`true_${e}_${s}`):`false_${e}_${s}`}catch(e){console.log("error ...."),console.log(e)}return`false_${e}_${s}`},sendImageOrFileAsync=async(e,s,n,t)=>{try{if(await t.isRegisteredUser(e)){const r=MessageMedia.fromFilePath(s);return await t.sendMessage(e,r,{caption:n}),`true_${e}_${n}`}return`false_${e}_${n}`}catch(e){console.log(e)}return`false_${e}_${n}`};module.exports={client:client,SESSION_FILE_PATH:SESSION_FILE_PATH,sendTextAsync:sendTextAsync,sendImageOrFileAsync:sendImageOrFileAsync};